<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" import="java.sql.*"%>
<!DOCTYPE html>
<%
request.setCharacterEncoding("UTF-8");
%>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<div align="center">
		<h2>테이블 student에서 이름으로 조회하는 프로그래밍</h2>
		<hr>
		<h2>학생 정보 조회</h2>
		<br>
		<%
		Connection conn = null;
		PreparedStatement pstmt = null;
		String jdbc_driver = "com.mysql.cj.jdbc.Driver";
		String jdbc_url = "jdbc:mysql://localhost/jspdb?allowPublicKeyRetrieval=true&useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=UTC";
		String sql = "select * from student where username like ?";
		String name = request.getParameter("username") + "%";
		int rowCount = 0;
		
		try {
			Class.forName(jdbc_driver);
			conn = DriverManager.getConnection(jdbc_url, "jspbook", "wjdehd3985");
			pstmt = conn.prepareStatement(sql);
			pstmt.setString(1, name);
			ResultSet result = pstmt.eecuteQuery();
		%>
		<table width=100% border=1 cellpadding=1>
			<tr>
				<td align="center"><b>아이디</b></td>
				<td align="center"><b>암호</b></td>
				<td align="center"><b>이름</b></td>
				<td align="center"><b>학번</b></td>
				<td align="center"><b>학과</b></td>
				<td align="center"><b>휴대폰</b></td>
				<td align="center"><b>이메일</b></td>
			</tr>
		</table>
	</div>
</body>
</html>